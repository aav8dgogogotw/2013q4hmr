var jSelectDate={settings:{css:"date",borderCss:"date",disabled:false,yearBegin:1960,yearEnd:2008,isShowLabel:true},init:function(a){a.each(function(){var f=$(this);var l=f.val();elDate=new Date(l.split("-").join("/"));var k=elDate.getFullYear();var d=jSelectDate.returnMonth(elDate.getMonth());var c=elDate.getDate();f.hide();var n=$("jSelectDateBorder").length+1;var o=document.createElement("span");o.id="spanDate"+n;o.className="jSelectDateBorder "+jSelectDate.settings.borderCss;o.disabled=jSelectDate.settings.disabled;f.after(o);var p=document.createElement("select");p.id="selYear"+n;p.className=jSelectDate.settings.css;p.disabled=jSelectDate.settings.disabled;for(var h=jSelectDate.settings.yearEnd;h>=jSelectDate.settings.yearBegin;h--){var j=document.createElement("option");j.value=h;j.innerHTML=h;if(!isNaN(k)){if(h==k){j.selected=true}}p.appendChild(j);j=null}$(o).append(p);var m=document.createElement("select");m.id="selMonth"+n;m.className=jSelectDate.settings.css;m.disabled=jSelectDate.settings.disabled;for(var h=1;h<=12;h++){var j=document.createElement("option");j.value=h;j.innerHTML=h;if(!isNaN(d)){if(h==d){j.selected=true}}m.appendChild(j);j=null}$(p).after(m);var b=document.createElement("select");b.id="selDay"+n;b.className=jSelectDate.settings.css;b.disabled=jSelectDate.settings.disabled;var e=30;if(d==2){if(jSelectDate.isLeapYear(k)){e=29}else{e=28}}else{if(jSelectDate.isLargeMonth(d)){e=31}}for(var h=1;h<=e;h++){var j=document.createElement("option");j.value=h;j.innerHTML=h;if(!isNaN(c)){if(h==c){j.selected=true}}b.appendChild(j);j=null}$(m).after(b);if(jSelectDate.settings.isShowLabel){$(m).before("年 ");$(b).before("月 ");$(b).after("日")}else{$(m).before(" ");$(b).before(" ")}var g=function(){var q=$(p).val();var r=$(m).val();var i=$(b).val();f.val(q+"-"+r+"-"+i)};$(b).change(function(){return g()});$(m).change(function(){jSelectDate.progressDaySize(this,true);return g()});$(p).change(function(){jSelectDate.progressDaySize(this,false);return g()})})},isLeapYear:function(a){return(0==a%4&&((a%100!=0)||(a%400==0)))},isLargeMonth:function(a){var b=[true,false,true,false,true,false,true,true,false,true,false,true];return b[a-1]},returnMonth:function(b){var a=new Array("1","2","3","4","5","6","7","8","9","10","11","12");return a[b]},createOption:function(b,c){var a=document.createElement("option");a.value=b;a.innerHTML=c;return a},progressDaySize:function(c,f){if(f==true){var d=$(c).val();var b=$($("select",$(c).parent())[0]).val();var a=$($("select",$(c).parent())[2]);if(d==2){$("option:contains('31')",a).remove();$("option:contains('30')",a).remove();if(!jSelectDate.isLeapYear(b)){$("option:contains('29')",a).remove()}else{if($("option:contains('29')",a).length==0){a.append(jSelectDate.createOption(29,29))}}}else{if(!jSelectDate.isLargeMonth(d)){if($("option:contains('30')",a).length==0){a.append(jSelectDate.createOption(30,30))}$("option:contains('31')",a).remove()}else{if($("option:contains('30')",a).length==0){a.append(jSelectDate.createOption(30,30))}if($("option:contains('31')",a).length==0){a.append(jSelectDate.createOption(31,31))}}}}else{var e=$(c).parent();var b=$(c).val();var d=$($("select",e)[1]).val();var a=$($("select",e)[2]);if(d==2){$("option:contains('31')",a).remove();$("option:contains('30')",a).remove();if(!jSelectDate.isLeapYear(b)){$("option:contains('29')",a).remove()}else{if($("option:contains('29')",a).length==0){a.append(jSelectDate.createOption(29,29))}}}}}};jQuery.fn.jSelectDate=function(a){var b=function(){var c=new Date();return c.getFullYear()};jSelectDate.settings.yearEnd=b();$.extend(jSelectDate.settings,a);jSelectDate.init($(this));return $(this)};